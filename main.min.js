var c=document.getElementById("canvas"),d=c.getContext("2d");!function(){function i(){var t={};window.addEventListener("keydown",function(i){t[i.keyCode]=!0}),window.addEventListener("keyup",function(i){t[i.keyCode]=!1}),this.u=function(){return!0===t[32]}}function e(i){t=this,t.o=i,t.h=t.m=!0,t.t=1,t.k=0,t.b={x:20,y:20},t.a={x:c.width/2,y:c.height-128}}function n(t){this.a=t,this.b={x:30,y:60}}function a(){function t(){n.n(),n.g(d),n.r&&requestAnimationFrame(t)}var n=this;n.r=!0,n.q=0,n.j=8,n.s=new i,n.l=new Image,n.l.src="http://i.imgur.com/BWw5qor.png",n.p=15,n.c=0,n.e={x:0},n.f={x:c.width},n.i=new e(n),n.d=[],t()}a.prototype={n:function(){var t=this;t.i.m||(t.r=!1),t.i.n(t.c),t.q=Math.floor(t.c/(40*t.j)),t.c+=t.j,0===t.c%17&&.85<Math.random()&&(t.d.push(new n({x:t.c+c.width,y:c.height-60})),t.d=t.d.filter(function(i){return!(i.a.x<t.c-100)})),t.e.x-=t.j/t.p,t.e.x+c.width<=t.c&&(t.e.x=t.c+c.width),t.f.x-=t.j/t.p,t.f.x+c.width<=t.c&&(t.f.x=t.c+c.width)},g:function(){var t=this;d.save(),d.translate(-this.c,0),d.clearRect(0,0,c.width,c.height),d.drawImage(t.l,t.e.x,0),d.drawImage(t.l,t.f.x,0),t.i.g();for(var i=0;i<t.d.length;i++)t.d[i].g();d.restore(),d.fillStyle="#000",d.fillRect(0,c.height-30,c.width,40),d.fillStyle="#fff",d.font="25px arial",d.fillText(t.q+" Points",10,30),t.i.m||d.fillText("You died | F5 to retry",c.width/2-99,50)}},n.prototype={g:function(){var t=this;d.fillRect(t.a.x-t.b.x/2,t.a.y-t.b.y/2,t.b.x,t.b.y)}},e.prototype={n:function(t){var i=this;i.a.x=t+c.width/2-i.b.x/2,i.o.s.u()&&!i.h&&(i.h=!0,i.k=-18),i.h&&i.k++,i.a.y+=i.k,i.a.y<c.height-40?i.a.y+=i.t:(i.h=!1,i.k=0),i.a.y>c.height-40&&(i.a.y=c.height-40),0<i.o.d.filter(function(t){return!(i===t||i.a.x+i.b.x/2<t.a.x-t.b.x/2||i.a.y+i.b.y/2<t.a.y-t.b.y/2||i.a.x-i.b.x/2>t.a.x+t.b.x/2||i.a.y-i.b.y/2>t.a.y+t.b.y/2)}).length&&(i.m=!1)},g:function(){var t=this;d.fillRect(t.a.x-t.b.x/2,t.a.y-t.b.y/2,t.b.x,t.b.y)}},window.addEventListener("load",function(){new a})}();
