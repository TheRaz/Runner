var c=document.getElementById("canvas"),d=c.getContext("2d");
!function(){function h(){var b={};window.addEventListener("keydown",function(a){b[a.keyCode]=!0});window.addEventListener("keyup",function(a){b[a.keyCode]=!1});this.u=function(){return!0===b[32]}}function e(b){t=this;t.o=b;t.h=t.m=!0;t.t=1;t.k=0;t.b={x:20,y:20};t.a={x:c.width/2,y:c.height-128}}function f(b){this.a=b;this.b={x:30,y:60}}function g(){function b(){a.n();a.g(d);a.r&&requestAnimationFrame(b)}var a=this;a.r=!0;a.q=0;a.j=8;a.s=new h;a.l=new Image;a.l.src="http://i.imgur.com/BWw5qor.png";
a.p=15;a.c=0;a.e={x:0};a.f={x:c.width};a.i=new e(a);a.d=[];b()}g.prototype={n:function(){var b=this;b.i.m||(b.r=!1);b.i.n(b.c);b.q=Math.floor(b.c/(40*b.j));b.c+=b.j;0===b.c%17&&.85<Math.random()&&(b.d.push(new f({x:b.c+c.width,y:c.height-60})),b.d=b.d.filter(function(a){return!(a.a.x<b.c-100)}));b.e.x-=b.j/b.p;b.e.x+c.width<=b.c&&(b.e.x=b.c+c.width);b.f.x-=b.j/b.p;b.f.x+c.width<=b.c&&(b.f.x=b.c+c.width)},g:function(){var t=this;d.save();
d.translate(-this.c,0);d.clearRect(0,0,c.width,c.height);d.drawImage(t.l,t.e.x,0);d.drawImage(t.l,t.f.x,0);t.i.g();for(var b=0;b<t.d.length;b++)t.d[b].g();d.restore();d.fillStyle="#000";d.fillRect(0,c.height-30,c.width,40);d.fillStyle="#fff";d.font="25px arial";d.fillText(t.q+" Points",10,30);t.i.m||d.fillText("You died | F5 to retry",c.width/2-99,50)}};f.prototype={g:function(){var t=this;d.fillRect(t.a.x-t.b.x/2,t.a.y-t.b.y/2,t.b.x,t.b.y)}};e.prototype={n:function(b){var a=
this;a.a.x=b+c.width/2-a.b.x/2;a.o.s.u()&&!a.h&&(a.h=!0,a.k=-18);a.h&&a.k++;a.a.y+=a.k;a.a.y<c.height-40?a.a.y+=a.t:(a.h=!1,a.k=0);a.a.y>c.height-40&&(a.a.y=c.height-40);0<a.o.d.filter(function(b){return!(a===b||a.a.x+a.b.x/2<b.a.x-b.b.x/2||a.a.y+a.b.y/2<b.a.y-b.b.y/2||a.a.x-a.b.x/2>b.a.x+b.b.x/2||a.a.y-a.b.y/2>b.a.y+b.b.y/2)}).length&&(a.m=!1)},g:function(){var t=this;d.fillRect(t.a.x-t.b.x/2,t.a.y-t.b.y/2,t.b.x,t.b.y)}};window.addEventListener("load",
function(){new g})}();
